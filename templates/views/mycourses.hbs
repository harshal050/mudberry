<!DOCTYPE html>
<html>
<head>
    <!-- Your HTML head content -->
</head>
<body>
    <h1>Display Enrolled Courses</h1>
    <form id="emailForm">
        <label for="emailInput">Enter Email:</label>
        <input type="email" id="emailInput" name="email">
        <button type="submit">Display Enrolled Courses</button>
    </form>

    <div id="coursesDisplay">
        <!-- Enrolled courses will be displayed here -->
    </div>

    <script>
         document.getElementById('emailForm').addEventListener('submit', async (event) => {
            event.preventDefault();
            
            const email = document.getElementById('emailInput').value;
            if (!email) {
                alert('Please enter an email');
                return;
            }

            try {
                
                const response = await fetch(`/api/enrolledCourses?email=${email}`);
                const data = await response.json();
                console.log(data)
                
                console.log(data)    
                displayCourses(data);
            } catch (error) {
                console.error('Error:', error);
                alert('An error occurred while fetching data');
            }
        });

        function displayCourses(data) {
            const coursesDisplay = document.getElementById('coursesDisplay');
            coursesDisplay.innerHTML = '';

            if (data.masterPlans.length > 0) {
                const masterPlansHTML = data.masterPlans.map(plan => {
                    return `<div><h2>${plan.courseName}</h2><p>${plan.description}</p></div>`;
                }).join('');
                coursesDisplay.innerHTML += `<h2>Master Classes:</h2>${masterPlansHTML}`;
            }

            if (data.privatePlans.length > 0) {
                const privatePlansHTML = data.privatePlans.map(plan => {
                    return `<div><h2>${plan.courseName}</h2><p>${plan.description}</p></div>`;
                }).join('');
                coursesDisplay.innerHTML += `<h2>Private Classes:</h2>${privatePlansHTML}`;
            }
        }
    </script>
</body>
</html>
